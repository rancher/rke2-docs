"use strict";(self.webpackChunkrke_2_docs=self.webpackChunkrke_2_docs||[]).push([[1146],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var l=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=l.createContext({}),u=function(e){var n=l.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=u(e.components);return l.createElement(o.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},d=l.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(t),m=r,h=d["".concat(o,".").concat(m)]||d[m]||c[m]||a;return t?l.createElement(h,s(s({ref:n},p),{},{components:t})):l.createElement(h,s({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,s=new Array(a);s[0]=d;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<a;u++)s[u]=t[u];return l.createElement.apply(null,s)}return l.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6156:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var l=t(7462),r=(t(7294),t(3905));const a={title:"Linux Uninstall"},s="Linux Uninstall",i={unversionedId:"install/linux_uninstall",id:"install/linux_uninstall",title:"Linux Uninstall",description:"Uninstalling RKE2 deletes the cluster data and all of the scripts.",source:"@site/docs/install/linux_uninstall.md",sourceDirName:"install",slug:"/install/linux_uninstall",permalink:"/install/linux_uninstall",draft:!1,editUrl:"https://github.com/rancher/rke2-docs/edit/main/docs/install/linux_uninstall.md",tags:[],version:"current",lastUpdatedAt:1673383617,formattedLastUpdatedAt:"Jan 10, 2023",frontMatter:{title:"Linux Uninstall"},sidebar:"mySidebar",previous:{title:"Windows Air-Gap Install",permalink:"/install/windows_airgap"},next:{title:"Windows Uninstall",permalink:"/install/windows_uninstall"}},o={},u=[{value:"RPM Method",id:"rpm-method",level:2},{value:"Tarball Method",id:"tarball-method",level:2}],p=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",n)},c=p("Tabs"),d=p("TabItem"),m={toc:u};function h(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,l.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"linux-uninstall"},"Linux Uninstall"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Uninstalling RKE2 deletes the cluster data and all of the scripts.")),(0,r.kt)("p",null,"Depending on the method used to install RKE2, the uninstallation process varies."),(0,r.kt)("h2",{id:"rpm-method"},"RPM Method"),(0,r.kt)("p",null,"To uninstall RKE2 installed via the RPM method from your system, simply run the commands corresponding to the version of RKE2 you have installed, either as the root user or through ",(0,r.kt)("inlineCode",{parentName:"p"},"sudo"),". This will shutdown RKE2 process, remove the RKE2 RPMs, and clean up files used by RKE2."),(0,r.kt)(c,{mdxType:"Tabs"},(0,r.kt)(d,{value:"v1.18.13+rke2r1 and newer",default:!0,mdxType:"TabItem"},(0,r.kt)("p",null,"The bundled ",(0,r.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script will remove the corresponding RPM packages during the uninstall process. Simply run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/bin/rke2-uninstall.sh\n"))),(0,r.kt)(d,{value:"v1.18.11+rke2r1 - v1.18.12+rke2r1",default:!0,mdxType:"TabItem"},(0,r.kt)("p",null,"You will need to manually remove the RKE2 RPMs after calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"/usr/bin/rke2-uninstall.sh\nyum remove -y 'rke2-*'\nrm -rf /run/k3s\n"))),(0,r.kt)(d,{value:"v1.18.10+rke2r1 and Older",default:!0,mdxType:"TabItem"},(0,r.kt)("p",null,"RPM based installs did not package the ",(0,r.kt)("inlineCode",{parentName:"p"},"rke2-uninstall.sh")," script. These instructions provide guidance on how to download and use the necessary scripts."),(0,r.kt)("p",null,"First, remove the corresponding RKE2 packages and ",(0,r.kt)("inlineCode",{parentName:"p"},"/run/k3s")," directory."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yum remove -y 'rke2-*'\nrm -rf /run/k3s\n")),(0,r.kt)("p",null,"Once those commands are run, the rke2-uninstall.sh and rke2-killall.sh scripts should be downloaded. These two scripts will stop any running containers and processes, clean up used processes, and ultimately remove RKE2 from the system. Run the commands below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sL https://raw.githubusercontent.com/rancher/rke2/master/bundle/bin/rke2-uninstall.sh --output rke2-uninstall.sh\nchmod +x rke2-uninstall.sh\nmv rke2-uninstall.sh /usr/local/bin\n\ncurl -sL https://raw.githubusercontent.com/rancher/rke2/master/bundle/bin/rke2-killall.sh --output rke2-killall.sh\nchmod +x rke2-killall.sh\nmv rke2-killall.sh /usr/local/bin\n\n")),(0,r.kt)("p",null,"Now run the rke2-uninstall.sh script. This will also call the rke2-killall.sh."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/local/bin/rke2-uninstall.sh\n")))),(0,r.kt)("h2",{id:"tarball-method"},"Tarball Method"),(0,r.kt)("p",null,"To uninstall RKE2 installed via the Tarball method from your system, simply run the command below. This will terminate the process, remove the RKE2 binary, and clean up files used by RKE2."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/local/bin/rke2-uninstall.sh\n")))}h.isMDXComponent=!0}}]);